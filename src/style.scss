/**
 * WP Table Block Extended - Frontend Styles
 *
 * These styles extend the core WordPress table block with
 * additional styling options controlled via CSS classes.
 */

// CSS Custom Properties for easy customization
:root {
	--wtbe-cell-padding-x: 24px;
	--wtbe-cell-padding-y: 16px;
	--wtbe-border-color: #e0e0e0;
	--wtbe-border-radius: 4px;
	--wtbe-font-size: 14px;

	// Header colors
	--wtbe-header-primary: #1e40af;
	--wtbe-header-dark: #1f2937;
	--wtbe-header-light: #9ca3af;
	--wtbe-header-success: #059669;
	--wtbe-header-warning: #d97706;

	// Row colors
	--wtbe-row-odd: #ffffff;
	--wtbe-row-even: #f9fafb;

	// CTA button
	--wtbe-cta-bg: #2563eb;
	--wtbe-cta-hover: #1d4ed8;
	--wtbe-cta-text: #ffffff;
}

// Base table styles
.wp-block-table {
	font-size: var(--wtbe-font-size);
	line-height: 1.5;

	// Ensure block displays correctly at all alignments
	&,
	&.aligncenter,
	&.alignleft,
	&.alignright {
		display: block;
		overflow-x: auto;
	}

	table {
		border: 1px solid var(--wtbe-border-color);
		border-radius: var(--wtbe-border-radius);
		border-collapse: separate;
		border-spacing: 0;
		width: 100%;
	}

	// Cell styles
	th,
	td {
		padding: var(--wtbe-cell-padding-y) var(--wtbe-cell-padding-x);
		font-size: inherit;
		vertical-align: middle;
	}

	// Header styles
	th {
		background: var(--wtbe-header-primary);
		color: #ffffff;
		border: none;
		font-weight: 600;
		text-align: left;
	}

	// Body cell styles
	td {
		border: none;
		font-weight: 400;
	}

	// Strong text in cells
	th strong,
	td strong {
		font-weight: 700;
	}

	thead {
		border: none;
	}

	// Alternating row colors (zebra stripes)
	tbody tr:nth-of-type(odd) td {
		background-color: var(--wtbe-row-odd);
	}

	tbody tr:nth-of-type(even) td {
		background-color: var(--wtbe-row-even);
	}

	// ===================
	// Header Color Variants
	// ===================

	&.wtbe-header-bg-dark th {
		background-color: var(--wtbe-header-dark);
	}

	&.wtbe-header-bg-light th {
		background-color: var(--wtbe-header-light);
		color: #1f2937;
	}

	&.wtbe-header-bg-success th {
		background-color: var(--wtbe-header-success);
	}

	&.wtbe-header-bg-warning th {
		background-color: var(--wtbe-header-warning);
		color: #1f2937;
	}

	// ===================
	// Optional Modifiers
	// ===================

	// Remove borders
	&.wtbe-no-borders table {
		border: none;
	}

	// Minimum cell width
	&.wtbe-cell-min-width {
		th,
		td {
			min-width: 150px;
		}
	}

	// Freeze first column for horizontal scrolling
	&.wtbe-freeze-first-col {
		th,
		td {
			&:first-child {
				position: sticky;
				left: 0;
				z-index: 2;

				// Shadow effect when scrolling
				&::after {
					content: '';
					display: block;
					position: absolute;
					top: 0;
					bottom: 0;
					left: 100%;
					width: 10px;
					background-image: linear-gradient(
						to right,
						rgba(0, 0, 0, 0.1) 0%,
						transparent 100%
					);
					opacity: 1;
					transition: opacity 300ms ease-out;
				}
			}
		}

		// Ensure sticky cells have background
		tbody tr:nth-of-type(odd) td:first-child {
			background-color: var(--wtbe-row-odd);
		}

		tbody tr:nth-of-type(even) td:first-child {
			background-color: var(--wtbe-row-even);
		}
	}

	// Center header text
	&.wtbe-header-text-center th {
		text-align: center;
	}

	// ===================
	// CTA Button Styles
	// ===================

	td a.wtbe-cta {
		display: inline-block;
		font-size: 14px;
		font-weight: 600;
		color: var(--wtbe-cta-text);
		padding: 8px 24px;
		background-color: var(--wtbe-cta-bg);
		border-radius: var(--wtbe-border-radius);
		border: none;
		text-decoration: none;
		white-space: nowrap;
		cursor: pointer;
		transition: background-color 150ms ease;

		&:hover {
			background-color: var(--wtbe-cta-hover);
			color: var(--wtbe-cta-text);
		}

		&:focus,
		&:focus-visible {
			outline: 2px solid var(--wtbe-cta-bg);
			outline-offset: 2px;
			background-color: var(--wtbe-cta-hover);
		}

		&:visited {
			color: var(--wtbe-cta-text);
		}
	}
}

// ===================
// Responsive Behavior
// ===================

@media (max-width: 768px) {
	.wp-block-table {
		th,
		td {
			padding: 12px 16px;
		}

		&.wtbe-cell-min-width {
			th,
			td {
				min-width: 120px;
			}
		}
	}
}
